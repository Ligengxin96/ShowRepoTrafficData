(this.webpackJsonpShowRepoTrafficData=this.webpackJsonpShowRepoTrafficData||[]).push([[0],{243:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a=n(58),i=n.n(a),s=n(137),o=n(1),c=n(76),r=n(259),u=n(177),l=n(194),d=n.n(l),j=n(252),v=n(255),h=n(61),p=n(201),f=n(256),b=n(258),O=n(254),x=n(257),m=n(260),g=n(170),w=n.n(g),y=n(195),q=n.n(y),Y=function(e){return q.a.get("".concat("https://www.ligengxin-server.top/getrepoinfo/v1/getrepoinfo","/").concat(e))},D=n(29);h.a([f.a,b.a,O.a,x.a,v.a,m.a]);var C=function(e){return e?{tooltip:{trigger:"axis"},legend:{data:["Views","Clones","Unique Visitors","Unique Cloners"],itemGap:7},grid:{top:"15%",left:"3%",right:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e.date}],yAxis:[{type:"value"}],dataZoom:[{type:"slider",show:!0,start:0,end:100},{type:"inside",start:0,end:100}],series:[{name:"Unique Visitors",type:"line",data:e.uniqueViews},{name:"Unique Cloners",type:"line",data:e.uniqueClones},{name:"Views",type:"line",data:e.views},{name:"Clones",type:"line",data:e.clones}]}:{}},M=function(e){var t=e.repoName,n=Object(o.useState)(!1),a=Object(s.a)(n,2),i=a[0],r=a[1],l=Object(o.useState)(null),v=Object(s.a)(l,2),h=v[0],f=v[1];Object(o.useEffect)((function(){r(!0),Y(t).then((function(e){var t=e.data.data;f(function(e){var t=e.viewsData,n=void 0===t?[]:t,a=e.clonesData,i=void 0===a?[]:a,s={views:[],uniqueViews:[],clones:[],uniqueClones:[],date:[]},o=n[n.length-1].date<i[i.length-1].date?n[n.length-1].date:i[i.length-1].date,c=n[0].date>i[0].date?n[0].date:i[0].date;for(o=w()(o),c=w()(c);o.isSameOrBefore(c);){var r,l,d,j;s.uniqueViews.push({date:o.format("YYYY-MM-DD"),value:(null===(r=n.find((function(e){return o.isSame(e.date)})))||void 0===r?void 0:r.uniques)||0}),s.views.push({date:o.format("YYYY-MM-DD"),value:(null===(l=n.find((function(e){return o.isSame(e.date)})))||void 0===l?void 0:l.count)||0}),s.uniqueClones.push({date:o.format("YYYY-MM-DD"),value:(null===(d=i.find((function(e){return o.isSame(e.date)})))||void 0===d?void 0:d.uniques)||0}),s.clones.push({date:o.format("YYYY-MM-DD"),value:(null===(j=i.find((function(e){return o.isSame(e.date)})))||void 0===j?void 0:j.count)||0}),s.date.push(o.format("YYYY-MM-DD")),o=w()(o).add(1,"days")}return Object(u.a)(Object(u.a)({},s),{},{totalViews:s.views.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalClones:s.clones.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalUniqueViews:s.uniqueViews.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalUniqueClones:s.uniqueClones.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value})}(void 0===t?[]:t))})).catch((function(e){console.log(e)})).finally((function(){r(!1)}))}),[t]);var b=h||{},O=b.totalViews,x=b.totalClones,m=b.totalUniqueViews,g=b.totalUniqueClones;return Object(D.jsx)(j.a,{bordered:!1,children:Object(D.jsxs)(j.a,{bordered:!0,loading:i,type:"inner",title:Object(D.jsx)("h2",{children:"".concat(t," ").concat((null===h||void 0===h?void 0:h.date[0])||"-"," To ").concat((null===h||void 0===h?void 0:h.date[h.date.length-1])||"-"," Traffic Data")}),children:[Object(D.jsx)(j.a.Grid,{style:{width:"100%"},hoverable:!1,children:Object(D.jsx)(d.a,{style:{height:"50vh"},echarts:p,option:C(h),notMerge:!0,lazyUpdate:!0})}),Object(D.jsx)(j.a.Grid,{style:{width:"100%",paddingTop:"10px",paddingBottom:"5px"},hoverable:!1,children:Object(D.jsxs)("h4",{style:{display:"flex"},children:[Object(D.jsx)(c.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(O||"-"," Views")})}),Object(D.jsx)(c.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(x||"-"," Clones")})}),Object(D.jsx)(c.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(m||"-"," Unique visitors")})}),Object(D.jsx)(c.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(g||"-"," Unique cloners")})})]})})]})})},V=n(253),S=function(e){var t=e.repos,n=void 0===t?[]:t,a=e.currentMenus,i=e.setCurrentMenus;return Object(D.jsx)(V.a,{onClick:function(e){i(e.key)},selectedKeys:a,theme:"dark",mode:"horizontal",children:n.map((function(e){return Object(D.jsx)(V.a.Item,{children:e},e)}))})},U=["FetchBingDailyImage","Ours-Album","FetchRepoTrafficData"],k=function(){var e=Object(o.useState)(U[0]),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(c.a,{children:Object(D.jsx)(S,{repos:U,currentMenus:n,setCurrentMenus:a})}),Object(D.jsx)(c.a,{children:Object(D.jsx)(r.a,{children:Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(o.Suspense,{fallback:null,children:Object(D.jsx)(M,{repoName:n})})})})})]})};n(243);i.a.render(Object(D.jsx)(k,{}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.c0b16e0a.chunk.js.map