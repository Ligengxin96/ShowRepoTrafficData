(this.webpackJsonpShowRepoTrafficData=this.webpackJsonpShowRepoTrafficData||[]).push([[0],{243:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a=n(58),i=n.n(a),s=n(137),c=n(1),o=n(76),u=n(259),l=n(177),r=n(194),d=n.n(r),j=n(252),v=n(255),h=n(61),p=n(201),f=n(256),b=n(258),O=n(254),x=n(257),m=n(260),w=n(170),g=n.n(w),y=n(195),q=n.n(y),Y=function(e){return q.a.get("".concat("https://www.ligengxin-server.top/getrepoinfo/v1/getrepoinfo","/").concat(e))},D=n(29);h.a([f.a,b.a,O.a,x.a,v.a,m.a]);var C=function(e){return e?{tooltip:{trigger:"axis"},legend:{data:["Views","Clones","Unique Views","Unique Clones"],itemGap:7},grid:{top:"15%",left:"3%",right:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e.date}],yAxis:[{type:"value"}],dataZoom:[{type:"slider",show:!0,start:0,end:100},{type:"inside",start:0,end:100}],series:[{name:"Unique Views",type:"line",data:e.uniqueViews},{name:"Unique Clones",type:"line",data:e.uniqueClones},{name:"Views",type:"line",data:e.views},{name:"Clones",type:"line",data:e.clones}]}:{}},M=function(e){var t=e.repoName,n=Object(c.useState)(!1),a=Object(s.a)(n,2),i=a[0],u=a[1],r=Object(c.useState)(null),v=Object(s.a)(r,2),h=v[0],f=v[1];Object(c.useEffect)((function(){u(!0),Y(t).then((function(e){var t=e.data.data;f(function(e){var t=e.viewsData,n=void 0===t?[]:t,a=e.clonesData,i=void 0===a?[]:a,s={views:[],uniqueViews:[],clones:[],uniqueClones:[],date:[]},c=n[n.length-1].date<i[i.length-1].date?n[n.length-1].date:i[i.length-1].date,o=n[0].date>i[0].date?n[0].date:i[0].date;for(c=g()(c),o=g()(o);c.isBefore(o);){var u,r,d,j;s.uniqueViews.push({date:c.format("YYYY-MM-DD"),value:(null===(u=n.find((function(e){return c.isSame(e.date)})))||void 0===u?void 0:u.uniques)||0}),s.views.push({date:c.format("YYYY-MM-DD"),value:(null===(r=n.find((function(e){return c.isSame(e.date)})))||void 0===r?void 0:r.count)||0}),s.uniqueClones.push({date:c.format("YYYY-MM-DD"),value:(null===(d=i.find((function(e){return c.isSame(e.date)})))||void 0===d?void 0:d.uniques)||0}),s.clones.push({date:c.format("YYYY-MM-DD"),value:(null===(j=i.find((function(e){return c.isSame(e.date)})))||void 0===j?void 0:j.count)||0}),s.date.push(c.format("YYYY-MM-DD")),c=g()(c).add(1,"days")}return Object(l.a)(Object(l.a)({},s),{},{totalViews:s.views.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalClones:s.clones.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalUniqueViews:s.uniqueViews.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value,totalUniqueClones:s.uniqueClones.reduce((function(e,t){return{value:e.value+t.value}}),{value:0}).value})}(void 0===t?[]:t))})).catch((function(e){console.log(e)})).finally((function(){u(!1)}))}),[t]);var b=h||{},O=b.totalViews,x=b.totalClones,m=b.totalUniqueViews,w=b.totalUniqueClones;return Object(D.jsx)(j.a,{bordered:!1,children:Object(D.jsxs)(j.a,{bordered:!0,loading:i,type:"inner",title:Object(D.jsx)("h2",{children:"".concat(t," ").concat((null===h||void 0===h?void 0:h.date[0])||"-"," To ").concat((null===h||void 0===h?void 0:h.date[h.date.length-1])||"-"," Traffic Data")}),children:[Object(D.jsx)(j.a.Grid,{style:{width:"100%"},hoverable:!1,children:Object(D.jsx)(d.a,{style:{height:"50vh"},echarts:p,option:C(h),notMerge:!0,lazyUpdate:!0})}),Object(D.jsx)(j.a.Grid,{style:{width:"100%",paddingTop:"10px",paddingBottom:"5px"},hoverable:!1,children:Object(D.jsxs)("h4",{style:{display:"flex"},children:[Object(D.jsx)(o.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(O||"-"," Views")})}),Object(D.jsx)(o.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(x||"-"," Clones")})}),Object(D.jsx)(o.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(m||"-"," Unique visitors")})}),Object(D.jsx)(o.a,{span:2,children:Object(D.jsx)("span",{children:"".concat(w||"-"," Unique cloners")})})]})})]})})},V=n(253),U=function(e){var t=e.repos,n=void 0===t?[]:t,a=e.currentMenus,i=e.setCurrentMenus;return Object(D.jsx)(V.a,{onClick:function(e){i(e.key)},selectedKeys:a,theme:"dark",mode:"horizontal",children:n.map((function(e){return Object(D.jsx)(V.a.Item,{children:e},e)}))})},S=["FetchBingDailyImage","Ours-Album","FetchRepoTrafficData"],k=function(){var e=Object(c.useState)(S[0]),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(o.a,{children:Object(D.jsx)(U,{repos:S,currentMenus:n,setCurrentMenus:a})}),Object(D.jsx)(o.a,{children:Object(D.jsx)(u.a,{children:Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(c.Suspense,{fallback:null,children:Object(D.jsx)(M,{repoName:n})})})})})]})};n(243);i.a.render(Object(D.jsx)(k,{}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.f2b83c2a.chunk.js.map